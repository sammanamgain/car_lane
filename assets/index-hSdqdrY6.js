var L=Object.defineProperty;var S=(t,e,o)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var d=(t,e,o)=>(S(t,typeof e!="symbol"?e+"":e,o),o);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}})();console.log("object");let M=class{constructor(e,o){d(this,"x");d(this,"y");this.x=e,this.y=o}},O=class{constructor(e,o,n){d(this,"position");d(this,"width");d(this,"height");this.position=e,this.width=o,this.height=n}draw(e){e.fillStyle="white",e.fillRect(this.position.x,this.position.y,this.width,this.height)}update(){this.position.y>window.innerHeight?this.position.y=0:this.position.y+=2}};class C{constructor(e,o,n,i,s,a,l){d(this,"x");d(this,"y");d(this,"width");d(this,"height");d(this,"image");d(this,"ctx");d(this,"speed");d(this,"imageLoaded",!1);this.x=e,this.y=o,this.width=n,this.height=i,this.image=new Image,this.image.onload=()=>{this.imageLoaded=!0,this.draw()},this.image.onerror=()=>{console.error(`Failed to load image at ${a}`)},this.image.src=a,this.ctx=l,this.speed=s}draw(){this.imageLoaded&&this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height)}update(e,o){e*=this.speed,o*=this.speed,this.x+=e,this.y+=o,this.draw()}}class _ extends C{constructor(e,o,n,i,s,a,l){super(e,o,n,i,s,a,l),this.addEventListener()}update(e,o){e*=this.speed,o*=this.speed,this.x+=e,this.y+=o,this.draw()}addEventListener(){window.addEventListener("keydown",e=>{e.key==="d"&&(this.x+=10),e.key==="a"&&(this.x-=10),e.key==="w"&&(this.y-=5),e.key==="s"&&(this.y+=5)})}}class I extends C{constructor(e,o,n,i,s,a,l){super(e,o,n,i,s,a,l)}update(){let e=1,o=1;e*=this.speed,o*=this.speed,this.y+=o,this.draw()}}function R(){const t=document.createElement("div");t.id="scoreDisplay",t.style.fontSize="24px",t.style.position="absolute",t.style.color="red",t.style.top="10%",t.style.right="20%",document.body.appendChild(t);const e=document.createElement("button");e.textContent="Restart Game",e.style.position="absolute",e.style.left="50%",e.style.top="60%",e.style.transform="translate(-50%, -50%)",e.style.display="none",e.style.padding="10px 10px",document.body.appendChild(e);const o=document.createElement("p");o.textContent="Highest Score",o.style.position="absolute",o.style.left="50%",o.style.top="30%",o.style.fontSize="32px",o.style.color="green",o.style.padding="10px 10px";const n=document.createElement("h1");n.style.fontFamily="monospace",n.innerText="Game Over",n.style.fontSize="102px",n.style.textShadow=" 1px 0 0 black,-1px 0 0 black,0 1px 0 black,0 -1px 0 black",n.style.color="Yellow",n.style.position="absolute",n.style.top="20%";const i=document.getElementById("canvas");i.style.display="none";const s=document.createElement("div");s.id="game-container",document.body.appendChild(s);const a=document.createElement("div");a.id="game-title",a.textContent="Car Lane Game",s.appendChild(a);const l=document.createElement("button");return l.id="start-button",l.textContent="Start Game",s.appendChild(l),document.body.style.height="100%",document.body.style.margin="0",document.body.style.display="flex",document.body.style.justifyContent="center",document.body.style.alignItems="center",document.body.style.backgroundColor="#282c34",document.body.style.color="white",document.body.style.fontFamily="'Arial', sans-serif",s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="center",a.style.fontSize="3em",a.style.marginBottom="20px",l.style.padding="10px 20px",l.style.fontSize="1.5em",l.style.backgroundColor="#61dafb",l.style.border="none",l.style.cursor="pointer",l.style.borderRadius="5px",l.style.transition="background 0.3s",l.addEventListener("mouseenter",function(){l.style.backgroundColor="#21a1f1"}),l.addEventListener("mouseleave",function(){l.style.backgroundColor="#61dafb"}),{scoreDisplay:t,restartButton:e,Highscore:o,GameoverText:n,gameContainer:s,startButton:l}}function H(t,e,o){const n={x:t.x,y:t.y,width:t.width,height:t.height},i={x:e.x,y:e.y,width:e.width,height:e.height},s=Math.max(0,Math.min(n.x+n.width,i.x+i.width)-Math.max(n.x,i.x)),a=Math.max(0,Math.min(n.y+n.height,i.y+i.height)-Math.max(n.y,i.y));return s*a>=o}function B(){gameOver=!1,score=0,starttime=Date.now(),rectangle=[],x_offset=0,y_offset=0,laneOccupied=[!1,!1,!1],enemy=[],ctx.clearRect(0,0,canvas.width,canvas.height),car.x=100,car.y=window.innerHeight-200;for(let t=0;t<2;t++){y_offset=0;for(let e=0;e<7;e++){const o=new Rectangles(new Points(400+x_offset,100+y_offset),20,50);o.draw(ctx),rectangle.push(o),y_offset+=150}x_offset+=500}update()}const{scoreDisplay:G,restartButton:m,Highscore:v,GameoverText:P,gameContainer:D,startButton:T}=R();function F(){let t=document.getElementById("canvas");t.style.display="block",t.style.overflow="hidden",t.style.backgroundColor="black",document.body.style.position="relative";let e=t.getContext("2d"),o=!1;t.width=window.innerWidth/1.5,t.height=window.innerHeight,e.fillStyle="black",e.fillRect(0,0,t.width,t.height);let n=0,i=0,s=0,a=[],l=Date.now(),g=!1;for(let r=0;r<2;r++){i=0;for(let c=0;c<7;c++){const h=new O(new M(400+n,100+i),20,50);h.draw(e),a.push(h),i+=150}n+=500}let p=new _(100,window.innerHeight-200,200,200,1,"/Car.png",e),x=["/Mini_van.png","/Mini_truck.png","Police.png","truck.png","taxi.png"],y=[t.width/4-200,t.width/2-50,3*t.width/4-50],u=[!1,!1,!1],f=[];function E(){let r=y.filter((c,h)=>!u[h]);if(r.length>0){let c=Math.floor(Math.random()*r.length),h=y.indexOf(r[c]),b=(Date.now()-l)/1e3*.05+1;console.log("printing speed:",b);let k=new I(y[h],0,200,200,b,x[Math.floor(Math.random()*x.length)],e);u[h]=!0,f.push(k)}}setInterval(E,2e3),f.forEach(r=>{r.draw()}),m.addEventListener("click",()=>{B(),m.style.display="none"}),p.draw();function w(){if(e.clearRect(0,0,t.width,t.height),G.innerText="Score: "+s,!o)a.forEach(r=>{r.update(),r.draw(e)}),f.forEach((r,c)=>{r.update(),r.y>t.height?(u[y.indexOf(r.x)]=!1,f.splice(c,1),s++):H(r,p,27e3)&&(console.log("collision detected"),o=!0)}),p.update(0,0);else{document.body.appendChild(P),e.clearRect(0,0,t.width,t.height);let r=localStorage.getItem("score");s>r&&(localStorage.setItem("score",s),v.innerText="You got High score",g=!0),g&&document.body.appendChild(v),e.font="32px Arial",e.fillStyle="red",e.fillText(`Your Score: ${s.toFixed(0)}`,t.width/2-130,t.height/2+50-80),m.style.display="block"}requestAnimationFrame(w)}w()}T.addEventListener("click",()=>{console.log("on click"),document.body.removeChild(D),F()});
