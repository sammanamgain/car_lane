var H=Object.defineProperty;var B=(t,e,i)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var d=(t,e,i)=>(B(t,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}})();console.log("object");class k{constructor(e,i){d(this,"x");d(this,"y");this.x=e,this.y=i}}class L{constructor(e,i,s){d(this,"position");d(this,"width");d(this,"height");this.position=e,this.width=i,this.height=s}draw(e){e.fillStyle="white",e.fillRect(this.position.x,this.position.y,this.width,this.height)}update(){this.position.y>window.innerHeight?this.position.y=0:this.position.y+=2}}class I{constructor(e,i,s,o,n,r,l){d(this,"x");d(this,"y");d(this,"width");d(this,"height");d(this,"image");d(this,"ctx");d(this,"speed");d(this,"imageLoaded",!1);this.x=e,this.y=i,this.width=s,this.height=o,this.image=new Image,this.image.onload=()=>{this.imageLoaded=!0,this.draw()},this.image.onerror=()=>{console.error(`Failed to load image at ${r}`)},this.image.src=r,this.ctx=l,this.speed=n}draw(){this.imageLoaded&&this.ctx.drawImage(this.image,78,17,90,230,this.x,this.y,this.width,this.height)}update(e,i){this.x+=e,this.y+=i,this.x>window.innerWidth/1.75-this.width?this.x=window.innerWidth/1.75-this.width:this.x<=0&&(this.x=0),this.draw()}}class G extends I{constructor(e,i,s,o,n,r,l){super(e,i,s,o,n,r,l),this.addEventListener()}update(e,i){super.update(e,i),this.draw()}addEventListener(){window.addEventListener("keydown",e=>{if(e.key==="d")for(let i=0;i<10;i++)this.update(10,0);e.key==="a"&&(this.x-=100),e.key==="w"&&(this.y-=5),e.key==="s"&&(this.y+=5)})}}class R extends I{constructor(e,i,s,o,n,r,l){super(e,i,s,o,n,r,l)}update(){super.update(0,1)}}function T(){const t=document.createElement("div");t.id="scoreDisplay",t.style.fontSize="24px",t.style.position="absolute",t.style.color="red",t.style.top="10%",t.style.right="30%",document.body.appendChild(t);const e=document.createElement("button");e.textContent="Restart Game",e.style.position="absolute",e.style.left="50%",e.style.top="60%",e.style.transform="translate(-50%, -50%)",e.style.display="none",e.style.padding="10px 10px",document.body.appendChild(e);const i=document.createElement("p");i.textContent="Highest Score",i.style.position="absolute",i.style.left="50%",i.style.top="10%",i.style.fontSize="32px",i.style.color="green",i.style.padding="10px 10px";const s=document.createElement("h1");s.style.fontFamily="monospace",s.innerText="Game Over",s.style.fontSize="102px",s.style.textShadow=" 1px 0 0 black,-1px 0 0 black,0 1px 0 black,0 -1px 0 black",s.style.color="Yellow",s.style.position="absolute",s.style.top="20%";const o=document.getElementById("canvas");o.style.display="none";const n=document.createElement("div");n.id="game-container",document.body.appendChild(n);const r=document.createElement("div");r.id="game-title",r.textContent="Car Lane Game",n.appendChild(r);const l=document.createElement("button");return l.id="start-button",l.textContent="Start Game",n.appendChild(l),document.body.style.height="100%",document.body.style.margin="0",document.body.style.display="flex",document.body.style.justifyContent="center",document.body.style.alignItems="center",document.body.style.backgroundColor="#282c34",document.body.style.color="white",document.body.style.fontFamily="'Arial', sans-serif",n.style.display="flex",n.style.flexDirection="column",n.style.alignItems="center",r.style.fontSize="3em",r.style.marginBottom="20px",l.style.padding="10px 20px",l.style.fontSize="1.5em",l.style.backgroundColor="#61dafb",l.style.border="none",l.style.cursor="pointer",l.style.borderRadius="5px",l.style.transition="background 0.3s",l.addEventListener("mouseenter",function(){l.style.backgroundColor="#21a1f1"}),l.addEventListener("mouseleave",function(){l.style.backgroundColor="#61dafb"}),{scoreDisplay:t,restartButton:e,Highscore:i,GameoverText:s,gameContainer:n,startButton:l}}function F(t,e,i){const s={x:t.x,y:t.y,width:t.width,height:t.height},o={x:e.x,y:e.y,width:e.width,height:e.height},n=Math.max(0,Math.min(s.x+s.width,o.x+o.width)-Math.max(s.x,o.x)),r=Math.max(0,Math.min(s.y+s.height,o.y+o.height)-Math.max(s.y,o.y));return n*r>=i}const{scoreDisplay:g,restartButton:x,Highscore:w,GameoverText:S,gameContainer:P,startButton:z}=T();let b;function A(){let t=document.getElementById("canvas");t.style.display="block",t.style.overflow="hidden",t.style.backgroundColor="black",document.body.style.position="relative";let e=t.getContext("2d"),i=!1;t.width=window.innerWidth/1.75,t.height=window.innerHeight,e.fillStyle="black",e.fillRect(0,0,t.width,t.height);let s=0,o=0,n=0,r=[],l=!1,v=1;for(let a=0;a<2;a++){o=0;for(let c=0;c<7;c++){const h=new L(new k(320+s,100+o),20,50);h.draw(e),r.push(h),o+=150}s+=400}let y=new G(100,window.innerHeight-400,90,230,1,"Car.png",e),C=["Mini_van.png","Mini_truck.png","Police.png","truck.png","taxi.png"],p=[t.width/4-150,t.width/2-150,3*t.width/4-50],m=[!1,!1,!1],u=[];function E(){let a=p.filter((c,h)=>!m[h]);if(a.length>0){let c=Math.floor(Math.random()*a.length),h=p.indexOf(a[c]),O=new R(p[h],0,90,230,v,C[Math.floor(Math.random()*C.length)],e);m[h]=!0,u.push(O)}}b=setInterval(E,2e3),u.forEach(a=>{a.draw()});function M(){w.innerText="",document.body.removeChild(S),clearInterval(b),i=!1,n=0,r=[],s=0,o=0,m=[!1,!1,!1],u=[],v=1,e.clearRect(0,0,t.width,t.height),y.x=100,y.y=window.innerHeight-200;for(let a=0;a<2;a++){o=0;for(let c=0;c<7;c++){const h=new L(new k(400+s,100+o),20,50);h.draw(e),r.push(h),o+=150}s+=500}b=setInterval(E,2e3),f()}x.addEventListener("click",()=>{M(),x.style.display="none"}),y.draw();function f(){if(e.clearRect(0,0,t.width,t.height),g.style.display="block",g.innerText="Score: "+n,!i)r.forEach(a=>{a.update(),a.draw(e)}),u.forEach((a,c)=>{a.update(),a.y>t.height?(m[p.indexOf(a.x)]=!1,u.splice(c,1),n++):F(a,y,10)&&(i=!0)}),y.update(0,0);else{g.style.display="none",document.body.appendChild(S),e.clearRect(0,0,t.width,t.height);let a=localStorage.getItem("score");n>a&&(localStorage.setItem("score",n),w.innerText="You got High score",l=!0),l&&document.body.appendChild(w),e.font="32px Arial",e.fillStyle="red",e.fillText(`Your Score: ${n.toFixed(0)}`,t.width/2-130,t.height/2+50-80),x.style.display="block"}requestAnimationFrame(f)}f()}z.addEventListener("click",()=>{document.body.removeChild(P),A()});
