var H=Object.defineProperty;var B=(t,e,i)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var d=(t,e,i)=>(B(t,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=i(o);fetch(o.href,s)}})();console.log("object");class C{constructor(e,i){d(this,"x");d(this,"y");this.x=e,this.y=i}}class v{constructor(e,i,n){d(this,"position");d(this,"width");d(this,"height");this.position=e,this.width=i,this.height=n}draw(e){e.fillStyle="white",e.fillRect(this.position.x,this.position.y,this.width,this.height)}update(){this.position.y>window.innerHeight?this.position.y=0:this.position.y+=2}}class L{constructor(e,i,n,o,s,a,l){d(this,"x");d(this,"y");d(this,"width");d(this,"height");d(this,"image");d(this,"ctx");d(this,"speed");d(this,"imageLoaded",!1);this.x=e,this.y=i,this.width=n,this.height=o,this.image=new Image,this.image.onload=()=>{this.imageLoaded=!0,this.draw()},this.image.onerror=()=>{console.error(`Failed to load image at ${a}`)},this.image.src=a,this.ctx=l,this.speed=s}draw(){this.imageLoaded&&this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height)}update(e,i){e*=this.speed,i*=this.speed,this.x+=e,this.y+=i,this.draw()}}class G extends L{constructor(e,i,n,o,s,a,l){super(e,i,n,o,s,a,l),this.addEventListener()}update(e,i){e*=this.speed,i*=this.speed,this.x+=e,this.y+=i,this.draw()}addEventListener(){window.addEventListener("keydown",e=>{if(e.key==="d")for(let i=0;i<10;i++)this.update(10,0);e.key==="a"&&(this.x-=100),e.key==="w"&&(this.y-=5),e.key==="s"&&(this.y+=5)})}}class R extends L{constructor(e,i,n,o,s,a,l){super(e,i,n,o,s,a,l)}update(){let e=1;e*=this.speed,this.y+=e,this.draw()}}function D(){const t=document.createElement("div");t.id="scoreDisplay",t.style.fontSize="24px",t.style.position="absolute",t.style.color="red",t.style.top="10%",t.style.right="30%",document.body.appendChild(t);const e=document.createElement("button");e.textContent="Restart Game",e.style.position="absolute",e.style.left="50%",e.style.top="60%",e.style.transform="translate(-50%, -50%)",e.style.display="none",e.style.padding="10px 10px",document.body.appendChild(e);const i=document.createElement("p");i.textContent="Highest Score",i.style.position="absolute",i.style.left="50%",i.style.top="10%",i.style.fontSize="32px",i.style.color="green",i.style.padding="10px 10px";const n=document.createElement("h1");n.style.fontFamily="monospace",n.innerText="Game Over",n.style.fontSize="102px",n.style.textShadow=" 1px 0 0 black,-1px 0 0 black,0 1px 0 black,0 -1px 0 black",n.style.color="Yellow",n.style.position="absolute",n.style.top="20%";const o=document.getElementById("canvas");o.style.display="none";const s=document.createElement("div");s.id="game-container",document.body.appendChild(s);const a=document.createElement("div");a.id="game-title",a.textContent="Car Lane Game",s.appendChild(a);const l=document.createElement("button");return l.id="start-button",l.textContent="Start Game",s.appendChild(l),document.body.style.height="100%",document.body.style.margin="0",document.body.style.display="flex",document.body.style.justifyContent="center",document.body.style.alignItems="center",document.body.style.backgroundColor="#282c34",document.body.style.color="white",document.body.style.fontFamily="'Arial', sans-serif",s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="center",a.style.fontSize="3em",a.style.marginBottom="20px",l.style.padding="10px 20px",l.style.fontSize="1.5em",l.style.backgroundColor="#61dafb",l.style.border="none",l.style.cursor="pointer",l.style.borderRadius="5px",l.style.transition="background 0.3s",l.addEventListener("mouseenter",function(){l.style.backgroundColor="#21a1f1"}),l.addEventListener("mouseleave",function(){l.style.backgroundColor="#61dafb"}),{scoreDisplay:t,restartButton:e,Highscore:i,GameoverText:n,gameContainer:s,startButton:l}}function T(t,e,i){const n={x:t.x,y:t.y,width:t.width,height:t.height},o={x:e.x,y:e.y,width:e.width,height:e.height},s=Math.max(0,Math.min(n.x+n.width,o.x+o.width)-Math.max(n.x,o.x)),a=Math.max(0,Math.min(n.y+n.height,o.y+o.height)-Math.max(n.y,o.y));return s*a>=i}const{scoreDisplay:g,restartButton:w,Highscore:E,GameoverText:k,gameContainer:F,startButton:P}=D();function z(){let t=document.getElementById("canvas");t.style.display="block",t.style.overflow="hidden",t.style.backgroundColor="black",document.body.style.position="relative";let e=t.getContext("2d"),i=!1;t.width=window.innerWidth/1.75,t.height=window.innerHeight,e.fillStyle="black",e.fillRect(0,0,t.width,t.height);let n=0,o=0,s=0,a=[],l=Date.now(),x=!1;for(let r=0;r<2;r++){o=0;for(let c=0;c<7;c++){const h=new v(new C(320+n,100+o),20,50);h.draw(e),a.push(h),o+=150}n+=400}let y=new G(100,window.innerHeight-400,250,250,1,"Car.png",e),b=["Mini_van.png","Mini_truck.png","Police.png","truck.png","taxi.png"],p=[t.width/4-150,t.width/2-150,3*t.width/4-50],m=[!1,!1,!1],u=[];function S(){let r=p.filter((c,h)=>!m[h]);if(r.length>0){let c=Math.floor(Math.random()*r.length),h=p.indexOf(r[c]),I=(Date.now()-l)/1e3*.5+1,O=new R(p[h],0,300,300,I,b[Math.floor(Math.random()*b.length)],e);m[h]=!0,u.push(O)}}setInterval(S,2e3),u.forEach(r=>{r.draw()});function M(){document.body.removeChild(k),console.log("function called"),i=!1,s=0,l=Date.now(),a=[],n=0,o=0,m=[!1,!1,!1],u=[],e.clearRect(0,0,t.width,t.height),y.x=100,y.y=window.innerHeight-200;for(let r=0;r<2;r++){o=0;for(let c=0;c<7;c++){const h=new v(new C(400+n,100+o),20,50);h.draw(e),a.push(h),o+=150}n+=500}f()}w.addEventListener("click",()=>{M(),w.style.display="none"}),y.draw();function f(){if(e.clearRect(0,0,t.width,t.height),g.style.display="block",g.innerText="Score: "+s,!i)a.forEach(r=>{r.update(),r.draw(e)}),u.forEach((r,c)=>{r.update(),r.y>t.height?(m[p.indexOf(r.x)]=!1,u.splice(c,1),s++):T(r,y,41e3)&&(i=!0)}),y.update(0,0);else{g.style.display="none",document.body.appendChild(k),e.clearRect(0,0,t.width,t.height);let r=localStorage.getItem("score");s>r&&(localStorage.setItem("score",s),E.innerText="You got High score",x=!0),x&&document.body.appendChild(E),e.font="32px Arial",e.fillStyle="red",e.fillText(`Your Score: ${s.toFixed(0)}`,t.width/2-130,t.height/2+50-80),w.style.display="block"}requestAnimationFrame(f)}f()}P.addEventListener("click",()=>{document.body.removeChild(F),z()});
